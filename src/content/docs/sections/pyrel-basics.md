---
title: PyRel Basics
description: Writing and running RelationalAI queries in Python
---

## Your First PyRel Program

After you have created a project directory and performed the [setup](../setup/#the-relationalai-python-library) steps, create a Python file called `first_example.py` with the following contents:

```python
import relationalai as rai

# Create a model named "people".
model = rai.Model("people")

# 2: Create a Person object type.
Person = model.Type("Person")

# 3: Populate the model with some people.
with model.rule():
    # Add some people to the model.
    alex = Person.add(name="Alex", age=19)
    bob = Person.add(name="Bob", age=47)
    carol = Person.add(name="Carol", age=17)
    deb = Person.add(name="Deb", age=17)

    # Add a `friend` property.
    carol.set(friend=deb)
    alex.set(friend=bob)
    alex.set(friend=carol)

# 4: Is Alex friends with someone that is at least 21 years old?
with model.query() as select:
    alex = Person(name="Alex")
    person = alex.friend
    person.age >= 21
    response = select(person.name)

# 5: Display the results. Note that `.results` is a pandas DataFrame.
print(response.results)
# Output:
#   name
# 0  Bob
```

If you do `python first_example.py`, you should see the output above printed to your Terminal.

## PyRel Concepts

This basic program illustrates all of the fundamental concepts of PyRel:

1. **Model**. A model is a collection of types, objects, and rules. In this example, we create a model named `people` and add a type named `Person` to it.

2. **Type**. A type is a collection of objects. In this example, we create a type named `Person`.

3. **Object**. An object is created as an instance of a type. In this example, we create four objects: `alex`, `bob`, `carol`, and `deb`.

4. **Property**. A property is a multi-valued attribute of an object. In this example, we add a `friend` property to the `Person` type. Each person can have zero or more friends.

5. **Rule**. Rules describe the objects in your model and the relationships between them. In this example, we create a rule that populates the model with some people and their friends.

6. **Query**. Queries are used to retrieve information from the model. In this example, we create a query that finds the names of the people who are friends with Alex and are at least 21 years old.

## Understanding a PyRel query

When the Python code in each rule or query is executed, the RelationalAI library collects the content of the rule or query and compiles it to Rel code. This code is sent to Snowflake for execution, and the results are returned to your computer.

In particular, since the query is not executed until the `with` block is closed, this means that you can't print `response.results` until *after* the end of the block.

Let's take a look at how the PyRel query works line-by-line:

```python
with model.query() as select:
    alex = Person(name="Alex")
    person = alex.friend
    person.age >= 21
    response = select(person.name)
```

1. **`with model.query() as select:`**. This line creates a new query object and assigns it to the variable `select`. The `with` statement in Python invokes certain internal methods of the query object at the beginning and end of the block of code.

2. **`alex = Person(name="Alex")`**. This line creates a new *instance* called `alex`. An instance is a type of *producer*, meaning that it corresponds to a collection of objects in the context of the model. In this case, `alex` is restricted to the set of `Person`s in the model whose name is "Alex", so it identifies a single person.

3. `alex.friend` is also a *producer* â€” it corresponds to the set of all objects that are related to `alex` via the `friend` property.

    It's helpful to visualize the relationship between the producers as a table: each producer gets its own column, and each row represents a combination of objects generated by the producers. At this point, the table looks like this:

    | `alex`    | `person`   |
    | --------- | ---------- |
    | &lt;alex> | &lt;bob>   |
    | &lt;alex> | &lt;carol> |

4. `person.age` is another producer -- at this point the table looks like this:

    | `alex`    | `person`   | `person.age` |
    | --------- | ---------- | ------------ |
    | &lt;alex> | &lt;bob>   | 47           |
    | &lt;alex> | &lt;carol> | 17           |

5. `person.age >= 21` is an *expression* and is also a producer:

    | `alex`    | `person`   | `person.age` | `person.age >= 21` |
    | --------- | ---------- | ------------ | ------------------ |
    | &lt;alex> | &lt;bob>   | 47           | true               |
    | &lt;alex> | &lt;carol> | 17           | false              |

6. Lastly, even though `person.name` is only used in the `select` clause, it is also a producer and is included in the table:

    | `alex`    | `person`   | `person.age` | `person.age >= 21` | `person.name` |
    | --------- | ---------- | ------------ | ------------------ | ------------- |
    | &lt;alex> | &lt;bob>   | 47           | true               | Bob           |
    | &lt;alex> | &lt;carol> | 17           | false              | Carol         |

7. The rules of PyRel specify that any rows containing the value `false` are removed from the table:

    | `alex`    | `person` | `person.age` | `person.age >= 21` | `person.name` |
    | --------- | -------- | ------------ | ------------------ | ------------- |
    | &lt;alex> | &lt;bob> | 47           | true               | Bob           |

    The columns supplied to `select` are then used to produce the final result:

    | `person.name` |
    | ------------- |
    | Bob           |

The net effect of these rules is that the lines in the body of the query are implicitly joined with the logical operator `and`. The query reads: 

> `alex` is a person named `"Alex"` *and* `alex` has a friend called `person` *and* `person` is at least 21 years old *and* `person` has a name. The result is a table of names of people who are friends with Alex and are at least 21 years old.

## Next Steps

To see examples and explanations of many more PyRel constructs, check out the [PyRel documentation](https://relationalai.github.io/relationalai-python/).